<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <style>
        :root {
            --bg: #f7f9fb;
            --card: #ffffff;
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --danger: #d93025;
            --text: #1f2933;
            --muted: #6b7280;
            --radius: 12px;
            --shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
        }
        * { box-sizing: border-box; }
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: radial-gradient(circle at 20% 20%, #eef2ff 0, transparent 25%),
                        radial-gradient(circle at 80% 0%, #e0f2fe 0, transparent 22%),
                        var(--bg);
            padding: 24px;
            color: var(--text);
            min-width: 400px;
        }
        h3 { margin: 0 0 16px 0; font-weight: 700; letter-spacing: -0.01em; color: #0f172a; }
        h4 { margin: 0 0 12px 0; font-weight: 600; font-size: 15px; color: #334155; }
        .card {
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.7);
            animation: fadeInUp 240ms ease;
        }
        label { font-weight: 500; display: block; margin-top: 14px; font-size: 13px; color: #475569; }
        
        select, input[type="text"], input[type="number"] {
            width: 100%;
            padding: 10px 12px;
            margin-top: 6px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            background: #f8fafc;
            transition: all 0.2s ease;
            font-size: 14px;
            color: #1e293b;
        }
        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .checkbox-wrapper { display: flex; align-items: center; gap: 10px; margin-top: 10px; cursor: pointer; }
        input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; accent-color: var(--primary); }
        .checkbox-label { margin: 0; font-weight: 500; font-size: 14px; color: #334155; cursor: pointer; }

        button {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: #fff;
            border: none;
            cursor: pointer;
            font-weight: 600;
            padding: 10px 16px;
            border-radius: 8px;
            margin-top: 16px;
            width: 100%;
            transition: transform 0.1s, box-shadow 0.2s;
        }
        button:hover { transform: translateY(-1px); box-shadow: 0 8px 16px rgba(37, 99, 235, 0.2); }
        button:active { transform: scale(0.98); }
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            margin-top: 0;
            padding: 8px 12px;
            font-size: 13px;
        }

        .note { font-size: 12px; color: var(--muted); margin-top: 6px; line-height: 1.4; }
        .warning {
            color: #b91c1c; background: #fef2f2;
            font-size: 12px; margin-top: 10px; display: none;
            padding: 10px; border-radius: 8px; border: 1px solid #fecaca;
        }
        
        table { width: 100%; border-collapse: collapse; margin-top: 16px; font-size: 13px; }
        th { text-align: left; font-size: 11px; text-transform: uppercase; color: #64748b; padding-bottom: 8px; border-bottom: 2px solid #f1f5f9; }
        td { padding: 10px 4px; border-bottom: 1px solid #f1f5f9; color: #334155; }
        
        .actions { display: flex; gap: 8px; margin-top: 16px; align-items: flex-end; }
        .actions > div { flex: 1; }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        #status { text-align: center; font-size: 13px; color: #16a34a; margin-top: 12px; opacity: 0; transition: opacity 0.3s; }

        .banner {
            background: #fff7ed;
            border: 1px solid #fed7aa;
            color: #9a3412;
            padding: 12px 14px;
            border-radius: 10px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            font-size: 13px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <h3 data-i18n="options_heading">Whisper Settings</h3>
    <div class="banner" data-i18n="banner_text">
        ⚠️ Experimental: This is not a bandaid fix to the webspeech API. Expect occasional slowdowns or interruptions. You can view voice-recognition status via the extension icon (pin it to your menu bar).
    </div>

    <div class="card">
        <h4 data-i18n="defaults_title">Defaults</h4>
        
        <label data-i18n="ai_model">AI Model</label>
        <select id="model-select">
            <optgroup label="English Only (Fast)" data-i18n="group_en_fast">
                <option value="Xenova/whisper-tiny.en" data-i18n="model_tiny_en">Tiny English (~75MB)</option>
                <option value="Xenova/whisper-base.en" data-i18n="model_base_en">Base English (~150MB)</option>
                <option value="Xenova/whisper-small.en" data-i18n="model_small_en">Small English (~500MB)</option>
            </optgroup>
            <optgroup label="Multilingual (General Purpose)" data-i18n="group_multi">
                <option value="Xenova/whisper-tiny" data-i18n="model_tiny_multi">Tiny Multilingual (~150MB)</option>
                <option value="Xenova/whisper-base" data-i18n="model_base_multi">Base Multilingual (~290MB)</option>
                <option value="Xenova/whisper-small" data-i18n="model_small_multi">Small Multilingual (~1GB)</option>
            </optgroup>
            <optgroup label="Experimental" data-i18n="group_experimental">
                <option value="Xenova/distil-whisper-medium.en" data-i18n="model_distil_en">Distil-Medium English (~600MB)</option>
            </optgroup>
        </select>
        <div id="size-warning" class="warning"></div>

        <label data-i18n="language_label">Language</label>
        <select id="language-select">
            <option value="auto" data-i18n="lang_auto">Auto-Detect</option>
            <option value="en" data-i18n="lang_en">English</option>
            <option value="es" data-i18n="lang_es">Spanish</option>
            <option value="fr" data-i18n="lang_fr">French</option>
            <option value="de" data-i18n="lang_de">German</option>
            <option value="it" data-i18n="lang_it">Italian</option>
            <option value="pt" data-i18n="lang_pt">Portuguese</option>
            <option value="ja" data-i18n="lang_ja">Japanese</option>
            <option value="zh" data-i18n="lang_zh">Chinese</option>
        </select>

        <label data-i18n="silence_timeout">Silence Timeout (ms)</label>
        <input id="silence-timeout" type="number" min="500" max="5000" step="100" value="1000" />
        <div class="note" data-i18n="silence_note">Time to wait after you stop speaking before sending.</div>

        <button id="save-btn" data-i18n="save_defaults">Save Defaults</button>
        <div id="status" data-i18n="settings_saved">Settings Saved</div>
    </div>

    <div class="card">
        <h4 data-i18n="developer_settings">Developer Settings</h4>
        <div class="checkbox-wrapper">
            <input type="checkbox" id="debug-mode" />
            <label for="debug-mode" class="checkbox-label" data-i18n="debug_banners">Show Notification Banners</label>
        </div>
        <div class="note" data-i18n="debug_note">
            Enable to see "Listening...", "Processing", and Error banners. <br>
            <strong>Default: Off (Silent Mode)</strong>
        </div>
    </div>

    <div class="card">
        <h4 data-i18n="site_overrides">Site Overrides</h4>
        <div class="note">Customize settings for specific websites (e.g., <b>google.com</b>).</div>

        <div class="actions">
            <div>
                <label style="margin-top:0" data-i18n="hostname">Hostname</label>
                <input id="override-host" type="text" placeholder="example.com" />
            </div>
            <div>
                <label style="margin-top:0" data-i18n="model_label">Model</label>
                <select id="override-model">
                    <option value="" data-i18n="override_default_option">(Default)</option>
                    <option value="Xenova/whisper-tiny.en" data-i18n="model_tiny_en">Tiny English</option>
                    <option value="Xenova/whisper-base.en" data-i18n="model_base_en">Base English</option>
                    <option value="Xenova/whisper-small.en" data-i18n="model_small_en">Small English</option>
                    <option value="Xenova/whisper-tiny" data-i18n="model_tiny_multi">Tiny Multi</option>
                    <option value="Xenova/whisper-base" data-i18n="model_base_multi">Base Multi</option>
                </select>
            </div>
        </div>
        
        <div class="actions" style="margin-top: 10px;">
            <div style="flex:1">
                 <label style="margin-top:0" data-i18n="language_label">Language</label>
                 <select id="override-language">
                    <option value="" data-i18n="override_default_option">(Default)</option>
                    <option value="auto" data-i18n="lang_auto">Auto</option>
                    <option value="en" data-i18n="lang_en">English</option>
                    <option value="es" data-i18n="lang_es">Spanish</option>
                 </select>
            </div>
            <div style="flex:1">
                <label style="margin-top:0" data-i18n="timeout_label">Timeout</label>
                <input id="override-timeout" type="number" placeholder="(Default)" />
            </div>
        </div>

        <div class="actions">
            <button id="add-override" style="margin-top:0;" data-i18n="add_rule">Add Rule</button>
            <button id="remove-override" class="btn-danger" style="margin-top:0;" data-i18n="remove_rule">Remove Rule</button>
        </div>

        <table id="override-table">
            <thead>
                <tr>
                    <th data-i18n="table_host">Host</th>
                    <th data-i18n="table_model">Model</th>
                    <th data-i18n="table_lang">Lang</th>
                    <th data-i18n="table_timeout">Timeout</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script src="options.js"></script>
</body>
</html>